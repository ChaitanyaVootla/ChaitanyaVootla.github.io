<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/main.css" rel="stylesheet">
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<div class="navbar navbar-static-top navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Zoomcar</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
			<li><a id="apihits"></a></li>
			<li><a id="items"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
</div>
<div class="row">
<div class="col-md-6">
	<div style="color:black;">
		<h4>&nbsp;<span class="glyphicon glyphicon-filter"  aria-hidden="true"></span> Filters</h4>
		<h5> &nbsp;&nbsp;<a href="#" class="sortprice" style="color:black;">Sort by price&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-down"  aria-hidden="true"></span></a>
		&nbsp;&nbsp;<a href="#" class="sortweight" style="color:black; margin-left:20%">Sort by weight&nbsp;&nbsp;<span class="glyphicon glyphicon-menu-down"  aria-hidden="true"></span></a>
		<span style="float:right;"><a href="#" class="sortname" style="color:black;">Sort by name &nbsp;&nbsp;<span class="glyphicon glyphicon-menu-down"  aria-hidden="true"></span></a>&nbsp;&nbsp;</h5></span>
	</div>
	<ul class="list-group" id="list">
		
	</ul>
</div>
<div class="col-md-6" id="details">

	<h4 style="width:95%"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span> Location<span style="float:right;">
	<button class="btn btn-default  zoomin"><span class="glyphicon glyphicon-zoom-in" id="zoomin'+i+'" aria-hidden="true"></span></button>
	&nbsp;&nbsp;<button class="btn btn-default zoomout"><span class="glyphicon glyphicon-zoom-out"  id="zoomout'+i+'" aria-hidden="true"></span></button>
	&nbsp;&nbsp;<button class="btn btn-default refresh"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span></button></span></h4>
	<div id="gbox"></div>
	
	<div id="extra"></div>
</div>
</div>
<script>
var data;
var zoom=[];
var curr;
var names=[];
var prices=[];
var weights=[];
var check=[];
$(document).ready(function() {
	$("#list").append("&nbsp;&nbsp;&nbsp;<b style=\"color:black;\">Loading...</b>");
	$.ajax({
		url: "https://zoomcar-ui.0x10.info/api/courier?type=json&query=list_parcel",
								dataType: 'json',
								type: 'get',
								success: function(mydata) {
									$("#list").text("");
									data=mydata;
									console.log(mydata);
									$("#items").append('<span class="label label-danger">'+mydata.parcels.length+'</span> Items');
									for(i=0;i<mydata.parcels.length;i++){
										zoom[i]=12;
										names[i]=mydata.parcels[i].name;
										prices[i]=parseInt(mydata.parcels[i].price.replace(",",''));
										weights[i]=parseFloat(mydata.parcels[i].weight.replace("kg",''));
										dt=new Date();
										date=parseInt(mydata.parcels[i].date)
										dt2=new Date(date);
										$("#list").append('<li class="list-group-item"><a href="#" id="details'+i+'" class="detailsnow">'
										+mydata.parcels[i].name
										+'<span style="float:right;" class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></a>'
										+'</li>');
										$("#wrapper"+i).hide();
									}
									$(".sortname").click(function(a){
										names.sort();
										//console.log(names);
										$("#list").text("");
										for(i=0;i<data.parcels.length;i++){
											for(j=0;j<data.parcels.length;j++){
												if(names[i]==data.parcels[j].name){
													$("#list").append('<li class="list-group-item"><a href="#" id="details'+j+'" class="detailsnow">'
													+data.parcels[j].name
													+'<span style="float:right;" class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></a>'
													+'</li>');
												}
											}
										}
											$(".detailsnow").click(function(a){
											date=parseInt(mydata.parcels[$(this).attr("id").replace("details",'')].date)
											dt2=new Date(date);
											curr=$(this).attr("id").replace("details",'');
											$("#extra").text("");
											$("#gbox").text("");
											$("#gbox").append('<img class="gimage" src="">');
											$("#extra").append('<div class="row detailsrow"><h3>&nbsp;&nbsp;'
											+mydata.parcels[$(this).attr("id").replace("details",'')].name
											+'</h3><div class="col-md-3"><img class="image" style="box-shadow: 1px 1px 10px '+mydata.parcels[$(this).attr("id").replace("details",'')].color+';" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'"></div>'
											+'<div class="col-md-7">'
											+'<h5><b><span class="glyphicon glyphicon-scale" aria-hidden="true"></span> weight</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].weight+'</span>'
											+'<h5><b><span class="glyphicon glyphicon-time" aria-hidden="true"></span> ETA</b>: <span style="float:right;">'+dt2.toDateString()+" "+dt2.toTimeString().replace("GMT+0530 (India Standard Time)","")+'</span></h5>'
											+'<h5><b> Color</b>: <span style="float:right;"><span class="glyphicon glyphicon-tint" style="border-radius:4px; padding:4px; background-color:black; color:'+mydata.parcels[$(this).attr("id").replace("details",'')].color+'"aria-hidden="true"></span></span></h5>'
											+'<h5><b><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Type</b>:<span style="float:right;"> '+mydata.parcels[$(this).attr("id").replace("details",'')].type+'</span></h5>'
											+'<h5> <b>Price:</b> <span style="float:right;">&#8377; '+mydata.parcels[$(this).attr("id").replace("details",'')].price+'</span></h5>'
											+'<h5><b><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> Number</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].phone+'</span></h5>'
											+'<h5><b>Quantity</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].quantity+'</span></h5>'
											+'</div></div>');
											$("#imgdetails").text("");
											$("#imgdetails").append('<img class="image" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'">');
											var $image = $(".gimage");
											var $downloadingImage = $("<img>");
											$downloadingImage.load(function(){
											  $image.attr("src", $(this).attr("src"));
											});
											$downloadingImage.attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
											+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','
											+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
											+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude
											+'&zoom='+zoom[$(this).attr("id").replace("details",'')]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
										});
									});
									$(".sortprice").click(function(a){
										function sortNumber(a,b) {
											return a - b;
										}
										prices.sort(sortNumber);
										console.log(prices);
										$("#list").text("");
										for(i=0;i<data.parcels.length;i++){
											check[i]=0;
										}
										for(i=0;i<data.parcels.length;i++){
											for(j=0;j<data.parcels.length;j++){
												if(prices[i]==parseInt(data.parcels[j].price.replace(",",'')) && check[j]!=1){
													$("#list").append('<li class="list-group-item"><a href="#" id="details'+j+'" class="detailsnow">'
													+data.parcels[j].name
													+'<span style="float:right;" class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></a>'
													+'</li>');
													check[j]=1;
													break;
												}
											}
										}
											$(".detailsnow").click(function(a){
										date=parseInt(mydata.parcels[$(this).attr("id").replace("details",'')].date)
										dt2=new Date(date);
										curr=$(this).attr("id").replace("details",'');
										$("#extra").text("");
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$("#extra").append('<div class="row detailsrow"><h3>&nbsp;&nbsp;'
										+mydata.parcels[$(this).attr("id").replace("details",'')].name
										+'</h3><div class="col-md-3"><img class="image" style="box-shadow: 1px 1px 10px '+mydata.parcels[$(this).attr("id").replace("details",'')].color+';" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'"></div>'
										+'<div class="col-md-7">'
										+'<h5><b><span class="glyphicon glyphicon-scale" aria-hidden="true"></span> weight</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].weight+'</span>'
										+'<h5><b><span class="glyphicon glyphicon-time" aria-hidden="true"></span> ETA</b>: <span style="float:right;">'+dt2.toDateString()+" "+dt2.toTimeString().replace("GMT+0530 (India Standard Time)","")+'</span></h5>'
										+'<h5><b> Color</b>: <span style="float:right;"><span class="glyphicon glyphicon-tint" style="border-radius:4px; padding:4px; background-color:black; color:'+mydata.parcels[$(this).attr("id").replace("details",'')].color+'"aria-hidden="true"></span></span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Type</b>:<span style="float:right;"> '+mydata.parcels[$(this).attr("id").replace("details",'')].type+'</span></h5>'
										+'<h5> <b>Price:</b> <span style="float:right;">&#8377; '+mydata.parcels[$(this).attr("id").replace("details",'')].price+'</span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> Number</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].phone+'</span></h5>'
										+'<h5><b>Quantity</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].quantity+'</span></h5>'
										+'</div></div>');
										$("#imgdetails").text("");
										$("#imgdetails").append('<img class="image" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'">');
										var $image = $(".gimage");
										var $downloadingImage = $("<img>");
										$downloadingImage.load(function(){
										  $image.attr("src", $(this).attr("src"));
										});
										$downloadingImage.attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude
										+'&zoom='+zoom[$(this).attr("id").replace("details",'')]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
									});
									});
									$(".sortweight").click(function(a){
										function sortNumber(a,b) {
											return a - b;
										}
										weights.sort(sortNumber);
										console.log(weights);
										$("#list").text("");
										for(i=0;i<data.parcels.length;i++){
											check[i]=0;
										}
										for(i=0;i<data.parcels.length;i++){
											for(j=0;j<data.parcels.length;j++){
												if(weights[i]==parseFloat(data.parcels[j].weight.replace("kg",'')) && check[j]!=1){
													$("#list").append('<li class="list-group-item"><a href="#" id="details'+j+'" class="detailsnow">'
													+data.parcels[j].name
													+'<span style="float:right;" class="glyphicon glyphicon-triangle-right" aria-hidden="true"></span></a>'
													+'</li>');
													check[j]=1;
													break;
												}
											}
										}
											$(".detailsnow").click(function(a){
										date=parseInt(mydata.parcels[$(this).attr("id").replace("details",'')].date)
										dt2=new Date(date);
										curr=$(this).attr("id").replace("details",'');
										$("#extra").text("");
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$("#extra").append('<div class="row detailsrow"><h3>&nbsp;&nbsp;'
										+mydata.parcels[$(this).attr("id").replace("details",'')].name
										+'</h3><div class="col-md-3"><img class="image" style="box-shadow: 1px 1px 10px '+mydata.parcels[$(this).attr("id").replace("details",'')].color+';" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'"></div>'
										+'<div class="col-md-7">'
										+'<h5><b><span class="glyphicon glyphicon-scale" aria-hidden="true"></span> weight</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].weight+'</span>'
										+'<h5><b><span class="glyphicon glyphicon-time" aria-hidden="true"></span> ETA</b>: <span style="float:right;">'+dt2.toDateString()+" "+dt2.toTimeString().replace("GMT+0530 (India Standard Time)","")+'</span></h5>'
										+'<h5><b> Color</b>: <span style="float:right;"><span class="glyphicon glyphicon-tint" style="border-radius:4px; padding:4px; background-color:black; color:'+mydata.parcels[$(this).attr("id").replace("details",'')].color+'"aria-hidden="true"></span></span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Type</b>:<span style="float:right;"> '+mydata.parcels[$(this).attr("id").replace("details",'')].type+'</span></h5>'
										+'<h5> <b>Price:</b> <span style="float:right;">&#8377; '+mydata.parcels[$(this).attr("id").replace("details",'')].price+'</span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> Number</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].phone+'</span></h5>'
										+'<h5><b>Quantity</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].quantity+'</span></h5>'
										+'</div></div>');
										$("#imgdetails").text("");
										$("#imgdetails").append('<img class="image" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'">');
										var $image = $(".gimage");
										var $downloadingImage = $("<img>");
										$downloadingImage.load(function(){
										  $image.attr("src", $(this).attr("src"));
										});
										$downloadingImage.attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude
										+'&zoom='+zoom[$(this).attr("id").replace("details",'')]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
									});
									});
									$(".zoomin").click(function(a){
										zoom[curr]+=1;
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$(".gimage").attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[curr].live_location.latitude+','
										+mydata.parcels[curr].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[curr].live_location.latitude+','+mydata.parcels[curr].live_location.longitude
										+'&zoom='+zoom[curr]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
									});
									$(".zoomout").click(function(a){
										zoom[curr]-=1;
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$(".gimage").attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[curr].live_location.latitude+','
										+mydata.parcels[curr].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[curr].live_location.latitude+','+mydata.parcels[curr].live_location.longitude
										+'&zoom='+zoom[curr]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
									});
									$(".refresh").click(function(a){
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$.ajax({
												url: "https://zoomcar-ui.0x10.info/api/courier?type=json&query=list_parcel",
																		dataType: 'json',
																		type: 'get',
																		success: function(mydata) {
																			for(i=0;i<mydata.parcels.length;i++){
																				if(mydata.parcels[i].name==data.parcels[curr].name){
																					$(".gimage").attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
																					+mydata.parcels[i].live_location.latitude+','
																					+mydata.parcels[i].live_location.longitude+'&maptype=terrain&markers=color:blue|'
																					+mydata.parcels[i].live_location.latitude+','+mydata.parcels[i].live_location.longitude
																					+'&zoom='+zoom[i]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
																				}
																			}
																		}
												});
										});
									$(".detailsnow").click(function(a){
										date=parseInt(mydata.parcels[$(this).attr("id").replace("details",'')].date)
										dt2=new Date(date);
										curr=$(this).attr("id").replace("details",'');
										$("#extra").text("");
										$("#gbox").text("");
										$("#gbox").append('<img class="gimage" src="">');
										$("#extra").append('<div class="row detailsrow"><h3>&nbsp;&nbsp;'
										+mydata.parcels[$(this).attr("id").replace("details",'')].name
										+'</h3><div class="col-md-3"><img class="image" style="box-shadow: 1px 1px 10px '+mydata.parcels[$(this).attr("id").replace("details",'')].color+';" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'"></div>'
										+'<div class="col-md-7">'
										+'<h5><b><span class="glyphicon glyphicon-scale" aria-hidden="true"></span> weight</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].weight+'</span>'
										+'<h5><b><span class="glyphicon glyphicon-time" aria-hidden="true"></span> ETA</b>: <span style="float:right;">'+dt2.toDateString()+" "+dt2.toTimeString().replace("GMT+0530 (India Standard Time)","")+'</span></h5>'
										+'<h5><b> Color</b>: <span style="float:right;"><span class="glyphicon glyphicon-tint" style="border-radius:4px; padding:4px; background-color:black; color:'+mydata.parcels[$(this).attr("id").replace("details",'')].color+'"aria-hidden="true"></span></span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span> Type</b>:<span style="float:right;"> '+mydata.parcels[$(this).attr("id").replace("details",'')].type+'</span></h5>'
										+'<h5> <b>Price:</b> <span style="float:right;">&#8377; '+mydata.parcels[$(this).attr("id").replace("details",'')].price+'</span></h5>'
										+'<h5><b><span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> Number</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].phone+'</span></h5>'
										+'<h5><b>Quantity</b>: <span style="float:right;">'+mydata.parcels[$(this).attr("id").replace("details",'')].quantity+'</span></h5>'
										+'</div></div>');
										$("#imgdetails").text("");
										$("#imgdetails").append('<img class="image" src="'+mydata.parcels[$(this).attr("id").replace("details",'')].image+'">');
										var $image = $(".gimage");
										var $downloadingImage = $("<img>");
										$downloadingImage.load(function(){
										  $image.attr("src", $(this).attr("src"));
										});
										$downloadingImage.attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("details",'')].live_location.longitude
										+'&zoom='+zoom[$(this).attr("id").replace("details",'')]+'&size=640x300&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8');
									});
									$("#details0").click();
								}
	});
	
	$.ajax({
		url: "https://zoomcar-ui.0x10.info/api/courier?type=json&query=api_hits",
								dataType: 'json',
								type: 'get',
								success: function(mydata) {
									console.log(mydata);
										$("#apihits").append('<span class="label label-primary">'+mydata.api_hits+'</span> API hits');
								}
	});
});
</script>
