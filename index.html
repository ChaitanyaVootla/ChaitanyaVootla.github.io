<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/main.css" rel="stylesheet">
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<div class="navbar navbar-static-top navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Zoomcar</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
			<li><a id="apihits"></a></li>
			<li><a id="items"></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
</div>
<ul class="list-group" id="list">
	
</ul>
<script>
var data;
var zoom=[];
$(document).ready(function() {

	
	$.ajax({
		url: "https://zoomcar-ui.0x10.info/api/courier?type=json&query=list_parcel",
								dataType: 'json',
								type: 'get',
								success: function(mydata) {
									data=mydata;
									console.log(mydata);
									$("#items").append('<span class="label label-danger">'+mydata.parcels.length+'</span> Items');
									for(i=0;i<mydata.parcels.length;i++){
										zoom[i]=15;
										dt=new Date();
										date=parseInt(mydata.parcels[i].date)
										dt2=new Date(date);
										$("#list").append('<ul class="list-group"><li class="list-group-item" style="background-clor:'+mydata.parcels[i].color+'"><div class="row">'
										+'<h3 style="coor:'+mydata.parcels[i].color+'">'
										+mydata.parcels[i].name
										+'</h3><br><div class="col-md-4">'
										+'<img src="'+mydata.parcels[i].image+'" class="image"'
										+' style="box-shadow: 1px 1px 20px '+mydata.parcels[i].color+';"></div><div class="col-md-6">'
										+'<h4><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Date: '+dt2.toTimeString()+'</h4>'
										+'<h4> <b>&#8377;</b> Price: '+mydata.parcels[i].price+'</h4><h4>Quantity: '+mydata.parcels[i].quantity+'</h4>'
										+'</div></div><h5 align="center">'
										+'<a href="#" id="'+i+'" class="more">More details<br><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span></a></h5>'
										+'<div id="wrapper'+i+'"><br>'
										+'<div class="row"><div class="col-md-8">'
										+'<h4 style="width:90%"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span> Location<span style="float:right;">'
										+'<span class="glyphicon glyphicon-zoom-in  zoomin" id="zoomin'+i+'" aria-hidden="true"></span>'
										+'&nbsp;&nbsp;<span class="glyphicon glyphicon-zoom-out zoomout"  id="zoomout'+i+'" aria-hidden="true"></span>'
										+'&nbsp;&nbsp;<span class="glyphicon glyphicon-refresh" aria-hidden="true"></span></span></h4>'
										+'<img class="gimage" id="img'+i+'"src="http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[i].live_location.latitude+','
										+mydata.parcels[i].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[i].live_location.latitude+','+mydata.parcels[i].live_location.longitude
										+'&zoom=15&size=640x400&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8">'
										+'</div><div class="col-md-2">'
										+'<h4><span class="glyphicon glyphicon-scale" aria-hidden="true"></span> weight: '+mydata.parcels[i].weight
										+'</h4> <h4>Type: '+mydata.parcels[i].type+'</h4>'
										+'</div></div>'
										+'<h5 align="center"><a href="#" id="'+i+'" class="less">Less details<br><span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span></a></h5>'
										+'</div>'
										+'</li></ul>');
										$("#wrapper"+i).hide();
									}
									$(".more").click(function(a){
										console.log("wrapper"+$(this).attr("id"));
										a.preventDefault();
										$(this).text("");
										$("#wrapper"+$(this).attr("id")).slideDown();
									});
									$(".less").click(function(a){
										console.log("wrapper"+$(this).attr("id"));
										a.preventDefault();
										$("#wrapper"+$(this).attr("id")).slideUp();
										$("#"+$(this).attr("id")).append('More details<br><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>');
									});
									$(".zoomin").click(function(a){
										if(zoom[$(this).attr("id").replace("zoomin",'')]<17){
										zoom[$(this).attr("id").replace("zoomin",'')]+=1;
										$("#img"+$(this).attr("id").replace("zoomin",'')).attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[$(this).attr("id").replace("zoomin",'')].live_location.latitude+','
										+mydata.parcels[$(this).attr("id").replace("zoomin",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[$(this).attr("id").replace("zoomin",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("zoomin",'')].live_location.longitude
										+'&zoom='+zoom[$(this).attr("id").replace("zoomin",'')]+'&size=640x400&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8')
										}
									});
									$(".zoomout").click(function(a){
										if(zoom[$(this).attr("id").replace("zoomout",'')]>1){
										zoom[$(this).attr("id").replace("zoomout",'')]-=1;
										$("#img"+$(this).attr("id").replace("zoomout",'')).attr("src",'http://maps.googleapis.com/maps/api/staticmap?center='
										+mydata.parcels[$(this).attr("id").replace("zoomout",'')].live_location.latitude+','
										+mydata.parcels[$(this).attr("id").replace("zoomout",'')].live_location.longitude+'&maptype=terrain&markers=color:blue|'
										+mydata.parcels[$(this).attr("id").replace("zoomout",'')].live_location.latitude+','+mydata.parcels[$(this).attr("id").replace("zoomout",'')].live_location.longitude
										+'&zoom='+zoom[$(this).attr("id").replace("zoomout",'')]+'&size=640x400&key=AIzaSyCeFO-T8BMXKLAJSzSO19B8gtc8sb6WDS8')
										}
									});
								}
	});
	
	$.ajax({
		url: "https://zoomcar-ui.0x10.info/api/courier?type=json&query=api_hits",
								dataType: 'json',
								type: 'get',
								success: function(mydata) {
									console.log(mydata);
										$("#apihits").append('<span class="label label-primary">'+mydata.api_hits+'</span> API hits');
								}
	});
});
</script>
